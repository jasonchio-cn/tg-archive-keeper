version: '3.8'

services:
  bot:
    image: jasonchio/tg-archive-bot:latest
    container_name: tg-archive-bot
    restart: unless-stopped
    environment:
      TZ: Asia/Shanghai
      BOT_TOKEN: your_bot_token_here
      # Storage mode: local, webdav, or local,webdav
      STORAGE_MODE: local
      # WebDAV settings (required if STORAGE_MODE includes webdav)
      WEBDAV_URL: 
      WEBDAV_USERNAME: 
      WEBDAV_PASSWORD: 
    volumes:
      - /root/appdata/tg-archive-keeper/task_db:/data/task_db
      - /root/appdata/tg-archive-keeper/files:/data/files
      - /root/appdata/tg-archive-keeper/notes:/data/notes
      - /root/appdata/tg-archive-keeper/logs:/data/logs
    networks:
      - tg-archive
    logging:
      driver: json-file
      options:
        max-size: 100m

  worker:
    image: jasonchio/tg-archive-worker:latest
    container_name: tg-archive-worker
    restart: unless-stopped
    environment:
      TZ: Asia/Shanghai
      BOT_TOKEN: your_bot_token_here
      # Storage mode: local, webdav, or local,webdav
      STORAGE_MODE: local
      # WebDAV settings (required if STORAGE_MODE includes webdav)
      WEBDAV_URL: 
      WEBDAV_USERNAME: 
      WEBDAV_PASSWORD: 
    volumes:
      - /root/appdata/tg-archive-keeper/task_db:/data/task_db
      - /root/appdata/tg-archive-keeper/files:/data/files
      - /root/appdata/tg-archive-keeper/notes:/data/notes
      - /root/appdata/tg-archive-keeper/logs:/data/logs
      - /root/appdata/tg-archive-keeper/tdl_session:/root/.tdl
    networks:
      - tg-archive
    logging:
      driver: json-file
      options:
        max-size: 100m

networks:
  tg-archive:
